<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="papaqiong">
    <meta name="author" content="papaqiong">

    <title>爬爬琼</title>
    <link rel="shortcut icon" href="img/favicon.ico" />
    <link href="css/style.css" rel="stylesheet">
</head>

<body>

    <img id="cvs-img" alt="background" src="https://papaqiong.github.io/img/avatar.jpg" style="display: none;">

    <div id="canvas-box">
        <canvas id="canvas"></canvas>
    </div>

    <section class="intro">
        <div class="slogan">
            <h4>愿爬爬琼女神</h4>
            <h1><span style="color: #a604f9;font-size: 30px;">天天开心快乐</span></h1>
            <!-- <h1><span id="love-days" style="color: #f70903;font-size: 80px;"></span><span style="color: #f70903;font-size: 30px;">天</span></h1> -->
            <p style="color: #333;font-size: 12px;">勿忘初心，方得始终</p>
        </div>  
    </section>

    <script src="js/count-up.js"></script>
    <script src="js/rainy.js"></script>

    <script>
        var options = {
            useEasing: true, 
            useGrouping: true, 
            separator: ',', 
            decimal: '.', 
        },
        sTime = new Date('2016-07-12 18:30:00').getTime(),
        eTime = new Date('2017-12-14 08:30:00').getTime(),
        loveDays = Math.ceil((eTime - sTime) / (1000*60*60*24)),
        loveEle = new CountUp('love-days', 0, loveDays, 0, 3, options);

        // setTimeout(function() {
        //     if (!loveEle.error) {
        //         loveEle.start();
        //     } else {
        //         document.getElementById('love-days').innerHTML = loveDays;
        //     }
        // }, 1000);

        window.onload = function () {
            raining();
        }

        function raining() {
            var image = document.getElementById('cvs-img');
            image.onload = function () {
                var engine = new RainyDay('canvas', 'cvs-img', window.innerWidth, window.innerHeight);
                
                engine.gravity = engine.GRAVITY_NON_LINEAR;
                engine.trail = engine.TRAIL_DROPS;
                engine.rain([engine.preset(3, 3, 0.88), engine.preset(5, 5, 0.9), engine.preset(6, 2, 1)], 100);
            };

            image.crossOrigin = 'anonymous';
            image.src = 'https://papaqiong.github.io/img/avatar.jpg';
        } 
    </script>

</body>
</html>
